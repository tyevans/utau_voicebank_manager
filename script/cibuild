#!/usr/bin/env bash
# script/cibuild: Run CI build (lint, type check, tests, build)

set -e
cd "$(dirname "$0")/.."

echo "==> Linting Python..."
uv run ruff check src/backend

echo "==> Type checking Python..."
uv run mypy src/backend --ignore-missing-imports || true

echo "==> Running backend tests..."
uv run pytest

echo "==> Linting frontend..."
cd src/frontend && npm run lint

echo "==> Building frontend..."
npm run build

echo "==> CI build passed!"
